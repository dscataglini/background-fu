BackgroundFu
============

Background tasks made dead simple.
Any resemblance to ActiveRecord is purely coincidental.

Bonus features
==============

There are bonus features available if you enable multithreading in AR.

These are: 
 * monitoring progress (perfect for ajax progress bars)
 * stopping a running worker in a merciful way.

Read the code (short and easy) to discover them.


Quick Start
===========

Install Kyle Maxwell's daemon_generator plugin from
http://svn.kylemaxwell.com/rails_plugins/daemon_generator/trunk

./script/generate daemon background
./script/generate background

rake db:migrate

./script/daemons start
    
then try in console:
    
job_id = Background.jobs.create(ExampleWorker, :add, 1, 2).id
    
...  and after few seconds when background daemon completes the job ...
    
Background.jobs.find(job_id).result should equal 3


Example
=======

In lib/workers/example_worker.rb:

class ExampleWorker

  def add(a, b)
    a + b
  end
  
end

In a controller:

  def create
    session[:job_id] = Background.jobs.create(ExampleWorker, :add, 1, 2).id
  end

  def show
    @job      = Background.jobs.find(session[:job_id])
    @result   = @job.result if @job.finished?
  end
  
  def index
    @jobs = Background.jobs
  end
  
  def destroy
    id = session[:job_id]
    Background.jobs.find(id).destroy
  end
  
Enjoy!

Copyright (c) 2007 Jacek Becela, released under the MIT license
